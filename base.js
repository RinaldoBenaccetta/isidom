// const $$window = window;
// const $$document = document;
// const $$docElt = $$document.documentElement;
// const $$docBody = $$document.body;
// const $$true = true;
// const $$false = false;
// const $$null = null;
// const $$_true = "true";
// const $$_false = "false";
// const $$_null = "null";
// const $$undefined = "undefined";
// const $$click = "click";
// const $$mouseup = "mouseup";
// const $$default = "default";
// const $$change = "change";
// const $$blur = "blur";
// const $$focus = "focus";

// const $$_body = "body";
// const $$_html = "html";

// // const $$_end = 'end';
// // const $$_start = 'start';

// const $$_img = "img";

// const $$_px = "px";
// const $$_emptyString = "";
// const $$_none = "none";
// const $$_initial = "initial";
// const $$_hidden = "hidden";
// const $$_ms = "ms";
// const $$_block = "block";

// const $$_ok = "ok";
// const $$_error = "error";
// const $$_no = "no";

// const $$_disabled = "disabled";

// // const $$_left = 'left';
// // const $$_right = 'right';

// // $$_alignContent >> css
// //
// // $$$alignContent >> js
// //https://docs.w3cub.com/css/css_properties_reference/
// const $$_alignContent = "align-content";
// const $$$alignContent = "alignContent";
// const $$_alignItems = "align-items";
// const $$$alignItems = "alignItems";
// const $$_alignSelf = "align-self";
// const $$$alignSelf = "alignSelf";
// const $$_all = "all";
// const $$$all = $$_all;
// const $$_animation = "animation";
// const $$$animation = $$_animation;
// const $$_appearance = "appearance";
// const $$$appearance = $$_appearance;

// const $$_backdropFilter = "backdrop-filter";
// const $$$backdropFilter = "backdropFilter";
// const $$_backfaceVisibility = "backface-visibility";
// const $$$backfaceVisibility = "backfaceVisibility";
// const $$_background = "background";
// const $$$background = $$_background;
// const $$_backgroundAttachment = "background-attachment";
// const $$$backgroundAttachment = "backgroundAttachment";
// const $$_backgroundBlendMode = "background-blend-mode";
// const $$$backgroundBlendMode = "backgroundBlend-mode";
// const $$_backgroundClip = "background-clip";
// const $$$backgroundClip = "backgroundClip";
// const $$_backgroundColor = "background-color";
// const $$$backgroundColor = "backgroundColor";
// const $$_backgroundImage = "background-image";
// const $$$backgroundImage = "backgroundImage";
// const $$_backgroundOrigin = "background-origin";
// const $$$backgroundOrigin = "backgroundOrigin";
// const $$_backgroundPosition = "background-position";
// const $$$backgroundPosition = "backgroundPosition";
// const $$_backgroundRepeat = "background-repeat";
// const $$$backgroundRepeat = "backgroundRepeat";
// const $$_backgroundSize = "background-size";
// const $$$backgroundSize = "backgroundSize";
// const $$_bleed = "bleed";
// const $$$bleed = $$_bleed;
// const $$_blockOverflow = "block-overflow";
// const $$$blockOverflow = "blockOverflow";
// const $$_border = "border";
// const $$$border = $$_border;
// const $$_borderTop = "border-top";
// const $$$borderTop = "borderTop";
// const $$_borderRight = "border-right";
// const $$$borderRight = "borderRight";
// const $$_borderBottom = "border-bottom";
// const $$$borderBottom = "borderBottom";
// const $$_borderLeft = "border-left";
// const $$$borderLeft = "borderLeft";
// const $$_borderTopStyle = "border-top-style";
// const $$$borderTopStyle = "borderTopStyle";
// const $$_borderRightStyle = "border-right-style";
// const $$$borderRightStyle = "borderRightStyle";
// const $$_borderBottomStyle = "border-bottom-style";
// const $$$borderBottomStyle = "borderBottomStyle";
// const $$_borderLeftStyle = "border-left-style";
// const $$$borderLeftStyle = "borderLeftStyle";
// const $$_borderCollapse = "border-collapse";
// const $$$borderCollapse = "borderCollapse";
// const $$_borderImage = "border-image";
// const $$$borderImage = "borderImage";
// const $$_borderRadius = "border-radius";
// const $$$borderRadius = "borderRadius";
// const $$_borderSpacing = "border-spacing";
// const $$$borderSpacing = "borderSpacing";
// const $$_bottom = "bottom";
// const $$$bottom = $$_bottom;
// const $$_boxDecorationBreak = "box-decoration-break";
// const $$$boxDecorationBreak = "box-decorationBreak";
// const $$_boxShadow = "box-shadow";
// const $$$boxShadow = "boxShadow";
// const $$_boxSizing = "box-sizing";
// const $$$boxSizing = "boxSizing";
// const $$_breakInside = "break-inside";
// const $$$breakInside = "breakInside";

// const $$_captionSide = "caption-side";
// const $$$captionSide = "captionSide";
// const $$_caretColor = "caret-color";
// const $$$caretColor = "caretColor";
// const $$_clear = "clear";
// const $$$clear = $$_clear;
// const $$_clipPath = "clip-path";
// const $$$clipPath = "clipPath";
// const $$_color = "color";
// const $$$color = $$_color;
// const $$_colorAdjust = "color-adjust";
// const $$$colorAdjust = "colorAdjust";
// const $$_columnCount = "column-count";
// const $$$columnCount = "columnCount";
// const $$_columnFill = "column-fill";
// const $$$columnFill = "columnFill";
// const $$_columnGap = "column-gap";
// const $$$columnGap = "columnGap";
// const $$_columnRule = "column-rule";
// const $$$columnRule = "columnRule";
// const $$_columnSpan = "column-span";
// const $$$columnSpan = "columnSpan";
// const $$_columnWidth = "column-width";
// const $$$columnWidth = "columnWidth";
// const $$_columns = "columns";
// const $$$columns = $$_columns;
// const $$_content = "content";
// const $$$content = $$_content;
// const $$_counterIncrement = "counter-increment";
// const $$$counterIncrement = "counterIncrement";
// const $$_counterReset = "counter-reset";
// const $$$counterReset = "counterReset";
// const $$_cursor = "cursor";
// const $$$cursor = $$_cursor;

// const $$_direction = "direction";
// const $$$direction = $$_direction;
// const $$_display = "display";
// const $$$display = $$_display;

// const $$_emptyCells = "empty-cells";
// const $$$emptyCells = "emptyCells";

// const $$_fill = "fill";
// const $$$fill = $$_fill;
// const $$_filter = "filter";
// const $$$filter = $$_filter;
// const $$_flex = "flex";
// const $$$flex = $$_flex;
// const $$_flexBasis = "flex-basis";
// const $$$flexBasis = "flexBasis";
// const $$_flexDirection = "flex-direction";
// const $$$flexDirection = "flexDirection";
// const $$_flexFlow = "flex-flow";
// const $$$flexFlow = "flexFlow";
// const $$_flexGrow = "flex-grow";
// const $$$flexGrow = "flexGrow";
// const $$_flexShrink = "flex-shrink";
// const $$$flexShrink = "flexShrink";
// const $$_flexWrap = "flex-wrap";
// const $$$flexWrap = "flexWrap";
// const $$_float = "float";
// const $$$float = $$_float;
// const $$_font = "font";
// const $$$font = $$_font;
// const $$_fontDisplay = "font-display";
// const $$$fontDisplay = "fontDisplay";
// const $$_fontFamily = "font-family";
// const $$$fontFamily = "fontFamily";
// const $$_fontFeatureSettings = "font-feature-settings";
// const $$$fontFeatureSettings = "fontFeatureSettings";
// const $$_fontSize = "font-size";
// const $$$fontSize = "fontSize";
// const $$_fontSizeAdjust = "font-size-adjust";
// const $$$fontSizeAdjust = "fontSizeAdjust";
// const $$_fontStretch = "font-stretch";
// const $$$fontStretch = "fontStretch";
// const $$_fontStyle = "font-style";
// const $$$fontStyle = "fontStyle";
// const $$_fontVariant = "font-variant";
// const $$$fontVariant = "fontVariant";
// const $$_fontVariantNumeric = "font-variant-numeric";
// const $$$fontVariantNumeric = "fontVariantNumeric";
// const $$_fontWeight = "font-weight";
// const $$$fontWeight = "fontWeight";

// const $$_gridRow = "grid-row";
// const $$$gridRow = "gridRow";
// const $$_gridColumn = "grid-column";
// const $$$gridColumn = "gridColumn";
// const $$_gridTemplateColumns = "grid-template-columns";
// const $$$gridTemplateColumns = "gridTemplateColumns";
// const $$_gridTemplateRows = "grid-template-rows";
// const $$$gridTemplateRows = "gridTemplateRows";

// const $$_hangingPunctuation = "hanging-punctuation";
// const $$$hangingPunctuation = "hangingPunctuation";
// const $$_height = "height";
// const $$$height = $$_height;
// const $$_hyphens = "hyphens";
// const $$$hyphens = $$_hyphens;

// const $$_imageRendering = "image-rendering";
// const $$$imageRendering = "imageRendering";
// const $$_initialLetter = "initial-letter";
// const $$$initialLetter = "initialLetter";
// const $$_isolation = "isolation";
// const $$$isolation = $$_isolation;

// const $$_justifyContent = "justify-content";
// const $$$justifyContent = "justifyContent";

// const $$_left = "left";
// const $$$left = $$_left;
// const $$_letterSpacing = "letter-spacing";
// const $$$letterSpacing = "letterSpacing";
// const $$_lineClamp = "line-clamp";
// const $$$lineClamp = "lineClamp";
// const $$_lineHeight = "line-height";
// const $$$lineHeight = "lineHeight";
// const $$_listStyle = "list-style";
// const $$$listStyle = "listStyle";

// const $$_margin = "margin";
// const $$$margin = $$_margin;
// const $$_marginTop = "margin-top";
// const $$$marginTop = "marginTop";
// const $$_marginLeft = "margin-left";
// const $$$marginLeft = "marginLeft";
// const $$_marginBottom = "margin-bottom";
// const $$$marginBottom = "marginBottom";
// const $$_marginRight = "margin-right";
// const $$$marginRight = "marginRight";
// const $$_maxHeight = "max-height";
// const $$$maxHeight = "maxHeight";
// const $$_maxWidth = "max-width";
// const $$$maxWidth = "maxWidth";
// const $$_minHeight = "min-height";
// const $$$minHeight = "minHeight";
// const $$_minWidth = "min-width";
// const $$$minWidth = "minWidth";
// const $$_mixBlendMode = "mix-blend-mode";
// const $$$mixBlendMode = "mixBlendMode";

// const $$_objectFit = "object-fit";
// const $$$objectFit = "objectFit";
// const $$_objectPosition = "object-position";
// const $$$objectPosition = "objectPosition";
// const $$_offsetAnchor = "offset-anchor";
// const $$$offsetAnchor = "offsetAnchor";
// const $$_offsetDistance = "offset-distance";
// const $$$offsetDistance = "offsetDistance";
// const $$_offsetPath = "offset-path";
// const $$$offsetPath = "offsetPath";
// const $$_offsetRotate = "offset-rotate";
// const $$$offsetRotate = "offsetRotate";
// const $$_opacity = "opacity";
// const $$$opacity = $$_opacity;
// const $$_order = "order";
// const $$$order = $$_order;
// const $$_orphans = "orphans";
// const $$$orphans = $$_orphans;
// const $$_outline = "outline";
// const $$$outline = $$_outline;
// const $$_outlineOffset = "outline-offset";
// const $$$outlineOffset = "outlineOffset";
// const $$_overflow = "overflow";
// const $$$overflow = $$_overflow;
// const $$_overflowAnchor = "overflow-anchor";
// const $$$overflowAnchor = "overflowAnchor";
// const $$_overflowWrap = "overflow-wrap";
// const $$$overflowWrap = "overflowWrap";
// const $$_overscrollBehavior = "overscroll-behavior";
// const $$$overscrollBehavior = "overscrollBehavior";

// const $$_padding = "padding";
// const $$$padding = $$_padding;
// const $$_paddingTop = "padding-top";
// const $$$paddingTop = "paddingTop";
// const $$_paddingRight = "padding-right";
// const $$$paddingRight = "paddingRight";
// const $$_paddingBottom = "padding-bottom";
// const $$$paddingBottom = "paddingBottom";
// const $$_paddingLeft = "padding-left";
// const $$$paddingLeft = "paddingLeft";
// const $$_pageBreak = "page-break";
// const $$$pageBreak = "pageBreak";
// const $$_perspective = "perspective";
// const $$$perspective = $$_perspective;
// const $$_perspectiveOrigin = "perspective-origin";
// const $$$perspectiveOrigin = "perspectiveOrigin";
// const $$_placeItems = "place-items";
// const $$$placeItems = "placeItems";
// const $$_pointerEvents = "pointer-events";
// const $$$pointerEvents = "pointerEvents";
// const $$_position = "position";
// const $$$position = $$_position;

// const $$_quotes = "quotes";
// const $$$quotes = $$_quotes;

// const $$_resize = "resize";
// const $$$resize = $$_resize;
// const $$_right = "right";
// const $$$right = $$_right;

// const $$_scrollBehavior = "scroll-behavior";
// const $$$scrollBehavior = "scrollBehavior";
// const $$_scrollMargin = "scroll-margin";
// const $$$scrollMargin = "scrollMargin";
// const $$_scrollPadding = "scroll-padding";
// const $$$scrollPadding = "scrollPadding";
// const $$_scrollSnapAlign = "scroll-snap-align";
// const $$$scrollSnapAlign = "scrollSnapAlign";
// const $$_scrollSnapStop = "scroll-snap-stop";
// const $$$scrollSnapStop = "scrollSnapStop";
// const $$_scrollSnapType = "scroll-snap-type";
// const $$$scrollSnapType = "scrollSnapType";
// const $$_scrollbar = "scrollbar";
// const $$$scrollbar = $$_scrollbar;
// const $$_scrollbarColor = "scrollbar-color";
// const $$$scrollbarColor = "scrollbarColor";
// const $$_scrollbarGutter = "scrollbar-gutter";
// const $$$scrollbarGutter = "scrollbarGutter";
// const $$_scrollbarWidth = "scrollbar-width";
// const $$$scrollbarWidth = "scrollbarWidth";
// const $$_shapeOutside = "shape-outside";
// const $$$shapeOutside = "shapeOutside";
// const $$_speak = "speak";
// const $$$speak = $$_speak;
// const $$_stroke = "stroke";
// const $$$stroke = $$_stroke;
// const $$_strokeDasharray = "stroke-dasharray";
// const $$$strokeDasharray = "strokeDasharray";
// const $$_strokeDashoffset = "stroke-dashoffset";
// const $$$strokeDashoffset = "strokeDashoffset";
// const $$_strokeLinecap = "stroke-linecap";
// const $$$strokeLinecap = "strokeLinecap";
// const $$_strokeLinejoin = "stroke-linejoin";
// const $$$strokeLinejoin = "strokeLinejoin";
// const $$_strokeWidth = "stroke-width";
// const $$$strokeWidth = "strokeWidth";

// const $$_tabSize = "tab-size";
// const $$$tabSize = "tabSize";
// const $$_tableLayout = "table-layout";
// const $$$tableLayout = "tableLayout";
// const $$_textAlign = "text-align";
// const $$$textAlign = "textAlign";
// const $$_textAlignLast = "text-align-last";
// const $$$textAlignLast = "textAlignLast";
// const $$_textDecoration = "text-decoration";
// const $$$textDecoration = "textDecoration";
// const $$_textDecorationColor = "text-decoration-color";
// const $$$textDecorationColor = "textDecorationColor";
// const $$_textDecorationLine = "text-decoration-line";
// const $$$textDecorationLine = "textDecorationLine";
// const $$_textDecorationSkip = "text-decoration-skip";
// const $$$textDecorationSkip = "textDecorationSkip";
// const $$_textDecorationSkipInk = "text-decoration-skip-ink";
// const $$$textDecorationSkipInk = "textDecorationSkipInk";
// const $$_textDecorationStyle = "text-decoration-style";
// const $$$textDecorationStyle = "textDecorationStyle";
// const $$_textIndent = "text-indent";
// const $$$textIndent = "textIndent";
// const $$_textJustify = "text-justify";
// const $$$textJustify = "textJustify";
// const $$_textOverflow = "text-overflow";
// const $$$textOverflow = "textOverflow";
// const $$_textRendering = "text-rendering";
// const $$$textRendering = "textRendering";
// const $$_textShadow = "text-shadow";
// const $$$textShadow = "textShadow";
// const $$_textStroke = "text-stroke";
// const $$$textStroke = "textStroke";
// const $$_textTransform = "text-transform";
// const $$$textTransform = "textTransform";
// const $$_textUnderlinePosition = "text-underline-position";
// const $$$textUnderlinePosition = "textUnderlinePosition";
// const $$_top = "top";
// const $$$top = $$_top;
// const $$_touchAction = "touch-action";
// const $$$touchAction = "touchAction";
// const $$_transform = "transform";
// const $$$transform = $$_transform;
// const $$_transformOrigin = "transform-origin";
// const $$$transformOrigin = "transformOrigin";
// const $$_transformStyle = "transform-style";
// const $$$transformStyle = "transformStyle";
// const $$_transition = "transition";
// const $$$transition = $$_transition;
// const $$_transitionDelay = "transition-delay";
// const $$$transitionDelay = "transitionDelay";
// const $$_transitionDuration = "transition-duration";
// const $$$transitionDuration = "transitionDuration";
// const $$_transitionProperty = "transition-property";
// const $$$transitionProperty = "transitionProperty";
// const $$_transitionTimingFunction = "transition-timing-function";
// const $$$transitionTimingFunction = "transitionTimingFunction";

// const $$_unicodeBidi = "unicode-bidi";
// const $$$unicodeBidi = "unicodeBidi";
// const $$_unicodeRange = "unicode-range";
// const $$$unicodeRange = "unicodeRange";
// const $$_userSelect = "user-select";
// const $$$userSelect = "userSelect";

// const $$_verticalAlign = "vertical-align";
// const $$$verticalAlign = "verticalAlign";
// const $$_visibility = "visibility";
// const $$$visibility = $$_visibility;

// const $$_whiteSpace = "white-space";
// const $$$whiteSpace = "whiteSpace";
// const $$_widows = "widows";
// const $$$widows = $$_widows;
// const $$_width = "width";
// const $$$width = $$_width;
// const $$_willChange = "will-change";
// const $$$willChange = "willChange";
// const $$_wordBreak = "word-break";
// const $$$wordBreak = "wordBreak";
// const $$_wordSpacing = "word-spacing";
// const $$$wordSpacing = "wordSpacing";
// const $$_writingMode = "writing-mode";
// const $$$writingMode = "writingMode";

// const $$_zIndex = "z-index";
// const $$$zIndex = "zIndex";
// const $$_zoom = "zoom";
// const $$$zoom = $$_zoom;

// function $isUndefined(variable) {
//   return typeof variable === $$undefined;
// }

// /**
//  * assaini les sélécteur : enlève les '.' et les '#'
//  *
//  * @param {[type]} selector le séclecteur à assainir
//  *
//  */
// function $selectorClean(selector) {
//   //console.log(selector);
//   if (selector.charAt(0) === "#" || selector.charAt(0) === ".") {
//     selector = selector.substr(1);
//   }
//   return selector;
// }

// function $isArray(input) {
//   return Array.isArray(input);
// }

// function $isNodeList(input) {
//   return NodeList.prototype.isPrototypeOf(input);
// }

// function $arrayToStringList(input, arg = $$true) {
//   let joint = arg === $$true ? "." : " ";
//   if ($isArray(input)) {
//     for (let i = 0, len = input.length; i < len; i++) {
//       input[i] = $selectorClean(input[i]);
//     }
//     return joint + input.join(joint);
//   }
//   return joint + $selectorClean(input);
// }


// ! $selectorToArray devient $selectorArrayClean
// function $selectorToArray(input) {
//   if ($isArray(input)) {
//     for (let i = 0, len = input.length; i < len; i++) {
//       input[i] = $selectorClean(input[i]);
//     }
//     return input;
//   }
//   return [$selectorClean(input)];
// }

function $getValue(element) {
  return element.value;
}

function $setValue(val, element) {
  element.value = val;
}

// /**
//  * renvoie une nodelist des éléments avec la classe [selector]
//  * la nodelist accepte forEach
//  * une nodelist est statique
//  *
//  * @param {[string, array]} classList          la classe recherchée
//  * @param {[type]} [element=document] Le DOM parent, c'est document par défaut
//  *
//  * @return {[type]} une nodelist avec les éléments trouvés
//  */
// function $byClass(classList, element = $$document) {
//   return element.querySelectorAll($arrayToStringList(classList));
// }

// /**
//  * renvoie une collection des éléments avec la classe [selector]
//  * la collection n'accepte pas forEach.
//  * on peux utiliser for avec length
//  * une collection est dynamique
//  *
//  * @param {[string, array]} classList          la classe recherchée
//  * @param {[type]} [element=document] Le DOM parent, c'est document par défaut
//  *
//  * @return {[type]} une collection avec les éléments trouvés
//  */
// function $byClassLive(className, element = $$document) {
//   return element.getElementsByClassName($arrayToStringList(className, $$false));
// }

// /**
//  * determine si une classe est présente dans l'élément fourni.
//  *
//  * @param {[type]} element   l'élément à tester
//  * @param {[type]} className La classe recherchée
//  *
//  * @return {[type]} true ou false
//  */
// function $hasClass(className, element) {
//   className = $selectorClean(className);
//   // return new RegExp(' ' + className + ' ').test(' ' + element.className + ' ');
//   return new RegExp(` ${className} `).test(` ${element.className} `);
// }

// todo : dupliquer $__processElement avec comme nom $forEach et deprecier $__processElement
function $__processElement(executeFunction, element) {
  if ($isNodeList(element) || $isArray(element)) {
    element.forEach(function(element) {
      executeFunction(element);
    });
  } else {
    executeFunction(element);
  }
}

/**
 * ajoute une classe à un ou des éléments
 *
 * @param {[type]} element   L'élément
 * @param {[type]} className La classe
 *
 */
function $addClass(className, element) {
  $__processElement(function(target) {
    target.classList.add(...$selectorToArray(className));
  }, element);
}

/**
 * ajoute une classe à un ou des éléments
 *
 * @param {[type]} element   L'élément
 * @param {[type]} className La classe
 *
 */
function $toggleClass(className, element) {
  let arg = $selectorToArray(className);

  $__processElement(function(target) {
    for (let i = 0, len = arg.length; i < len; i++) {
      target.classList.toggle(arg[i]);
    }
  }, element);
}

/**
 * enlève une ou plusieurs classes de la séléction
 *
 * @param {[string]} element   L'élément
 * @param {[string]} className La classe ou les classes
 *
 */
function $removeClass(className, element) {
  $__processElement(function(target) {
    target.classList.remove(...$selectorToArray(className));
  }, element);
}

// function $setStyle(element) {
//   return element.style;
// }

function $setStyle(value, property, element) {
  return (element.style[property] = value);
}

function $getStyle(property, element) {
  return element.style[property];
}

// /**
//  * renvoie le premier élément avec l'ID renseigné
//  *
//  * @param {[type]} id                 L'ID
//  * @param {[type]} [element=document] Le DOM parent, c'est document par défaut
//  *
//  * @return {[type]} un élément
//  */
// function $byId(id, element = $$document) {
//   return element.getElementById($selectorClean(id));
// }

// /**
//  * renvoie les éléments recherchés
//  * raccourci de querySelectorAll
//  *
//  * @param {[type]} query              Ce qu'il faut trouver
//  * @param {[type]} [element=document] Le DOM parent, c'est document par défaut
//  *
//  * @type {[type]}
//  */
// function $select(query, element = $$document) {
//   return element.querySelectorAll(query);
// }

// function $siblings(element) {
//   return Array.prototype.filter.call(element.parentNode.children, function(
//     child
//   ) {
//     return child !== element;
//   });
// }

function $getAttr(attribute, element) {
  return element.getAttribute(attribute);
}

function $getData(attribute, element) {
  // return element.getAttribute('data-' + attribute);
  return $getAttr("data-" + attribute, element);
}

function $setAttr(name, value, element) {
  // TODO: inverser name et value >> value, property, element
  element.setAttribute(name, value);
}

function $getText(element) {
  return element.textContent;
}

function $setText(text, element) {
  //console.log(text);
  //console.log(element);
  element.textContent = text;
}

function $getHeight(element = $$false) {
  if (element === $$false) {
    return $$window.innerHeight;
  }
  return parseFloat(
    getComputedStyle(element, $$null).height.replace($$_px, $$_emptyString)
  );
}

function $getWidth(element = $$false) {
  if (element === $$false) {
    return $$window.innerWidth;
  }
  return parseFloat(
    getComputedStyle(element, $$null).width.replace($$_px, $$_emptyString)
  );
}

function $offset(element) {
  var rect = element.getBoundingClientRect();
  return {
    top: rect.top + $$docBody.scrollTop,
    left: rect.left + $$docBody.scrollLeft
  };
}

// function $parent(element) {
//   return element.parentElement;
// }

// function $getNextSiblings(filter, element) {
//   var siblings = [];
//   while ((element = element.nextSibling)) {
//     siblings.push(element);
//   }
//   return $__filterCollection(filter, siblings);
// }

// function $getPreviousSiblings(filter, element) {
//   var siblings = [];
//   while ((element = element.previousSibling)) {
//     siblings.push(element);
//   }
//   return $__filterCollection(filter, siblings);
// }

// function $__filterCollection(filter, element) {
//   var output = [];
//   for (var i = 0; i < element.length; i++) {
//     // si le nodetype est un element
//     if (element[i].nodeType === 1) {
//       if (element[i].matches(filter)) output.push(element[i]);
//     }
//   }
//   return output;
// }

/**
 * affiche ou cache un element
 *
 * @param {[type]} element L'élément
 * @param {boolean} arg    L'argument : true ou false
 *
 */
function $display(argument, element) {
  var value;
  if (argument === $$false) value = $$_none;
  if (argument === $$true) value = $$_initial;
  if (argument != $$true && argument != $$false) value = argument;
  $setStyle(value, $$$display, element);
}

function $removeProperty(property, element) {
  element.style.removeProperty([property]);
}

/**
 * Masque un élément avec un effet de repli
 * @param {HTMLElement} element
 * @param {Number} duration
 *
 * @return {Promise<boolean>}
 */

function $slideUp(duration, element) {
  return new Promise(function(resolve, reject) {
    $setStyle(element.offsetHeight + $$_px, $$$height, element);
    $setStyle(
      `${$$_height}, ${$$_margin}, ${$$_padding}`,
      $$$transitionProperty,
      element
    );
    $setStyle(duration + $$_ms, $$$transitionDuration, element);
    element.offsetHeight; // eslint-disable-line no-unused-expressions
    $setStyle($$_hidden, $$$overflow, element);
    $setStyle(0, $$$height, element);
    $setStyle(0, $$$paddingTop, element);
    $setStyle(0, $$$paddingBottom, element);
    $setStyle(0, $$$marginTop, element);
    $setStyle(0, $$$marginBottom, element);

    $$window.setTimeout(function() {
      $display($$false, element);
      $removeProperty($$_height, element);
      $removeProperty($$_paddingTop, element);
      $removeProperty($$_paddingBottom, element);
      $removeProperty($$_marginTop, element);
      $removeProperty($$_marginBottom, element);
      $removeProperty($$_overflow, element);
      $removeProperty($$_transitionDuration, element);
      $removeProperty($$_transitionProperty, element);
      resolve($$false);
    }, duration);
  });
}

/**
 * Affiche un élément avec un effet de dépliement
 * @param {HTMLElement} element
 * @param {Number} duration
 *
 * @return {Promise<boolean>}
 */
function $slideDown(duration, element) {
  return new Promise(function(resolve, reject) {
    $removeProperty($$_display, element);
    let display = $$window.getComputedStyle(element).display;
    if (display === $$_none) display = $$_block;
    $display(display, element);
    let height = element.offsetHeight;
    $setStyle($$_hidden, $$$overflow, element);
    $setStyle(0, $$$height, element);
    $setStyle(0, $$$paddingTop, element);
    $setStyle(0, $$$paddingBottom, element);
    $setStyle(0, $$$marginTop, element);
    $setStyle(0, $$$marginBottom, element);
    element.offsetHeight; // eslint-disable-line no-unused-expressions
    $setStyle(
      `${$$_height}, ${$$_margin}, ${$$_padding}`,
      $$$transitionProperty,
      element
    );
    $setStyle(duration + $$_ms, $$$transitionDuration, element);
    $setStyle(height + $$_px, $$$height, element);
    $removeProperty($$_paddingTop, element);
    $removeProperty($$_paddingBottom, element);
    $removeProperty($$_marginTop, element);
    $removeProperty($$_marginBottom, element);
    $$window.setTimeout(function() {
      $removeProperty($$_height, element);
      $removeProperty($$_overflow, element);
      $removeProperty($$_transitionDuration, element);
      $removeProperty($$_transitionProperty, element);
    }, duration);
  });
}

/**
 * Affiche ou Masque un élément avec un effet de repli
 * @param {HTMLElement} element
 * @param {Number} duration
 *
 * @return {Promise<boolean>}
 */
function $slideToggle(duration, element) {
  if ($$window.getComputedStyle(element).display === $$_none) {
    return $slideDown(duration, element);
  } else {
    return $slideUp(duration, element);
  }
}

function $fadeOut(duration, easing, element) {
  if (easing === $$default) easing = "";
  setTimeout(() => $display($$false, element), duration);
  $setStyle(
    `${$$_opacity} ${duration}${$$_ms} ${easing}`,
    $$$transition,
    element
  );
  $setStyle(0, $$$opacity, element);
}

function $fadeIn(display, duration, easing, element) {
  if (easing === $$default) easing = "ease-in-out";
  if (display === $$default) display = $$_block; // pour fadein

  $setStyle(0, $$$opacity, element);
  $removeProperty($$$transition, element);
  $display(display, element);

  setTimeout(() => $setStyle(1, $$$opacity, element), 1); // on attend 1ms pour declencher l'opacité sinon ca ne fait pas de transition
  $setStyle(
    `${$$_opacity} ${duration}${$$_ms} ${easing}`,
    $$$transition,
    element
  );
}

function $fadeToggle(display, duration, easing, element) {
  if ($getStyle($$$opacity, element) > 0) $fadeOut(duration, easing, element);
  else $fadeIn(display, duration, easing, element);
}

// TODO: développer $animate séparément

// sur base de :
//https://javascript.info/js-animation

// voir aussi :
// https://codepen.io/AnotherLinuxUser/pen/eZxoQp

// function $animate({ease, draw, duration}) {
//
//   switch (ease) {
//     case 'test':
//       var timing = function(timeFraction) {
//         return 1 - Math.sin(Math.acos(timeFraction));
//       };
//       break;
//     default: var timing = function(timeFraction) {
//       return timeFraction;
//     };
//
//   }
//
//   console.log('animate');
//
//   let start = performance.now();
//
//   requestAnimationFrame(function animate(time) {
//     // timeFraction goes from 0 to 1
//     let timeFraction = (time - start) / duration;
//     if (timeFraction > 1) timeFraction = 1;
//
//     // calculate the current animation state
//     let progress = timing(timeFraction)
//
//     //console.log(progress);
//
//     draw(progress); // draw it
//
//     if (timeFraction < 1) {
//       requestAnimationFrame(animate);
//     }
//
//   });
// }

// $$window.onresize = function() {
//
//   console.log('resize');
//   textarea.forEach(function(element){
//     console.log(element.scrollHeight);
//     element.style.height = 'auto';
//
//     element.style.height = (element.scrollHeight) + $$_px;
//   });
// };

//textarea.forEach(function(element){

//   $setStyle(element).height = (element.scrollHeight) + $$_px;
//   element.addEventListener('scroll', function() {
//     console.log('scroll');
//     console.log(element.scrollHeight);
//     //element.style.height = 'auto';
//     $setStyle(element).height = (element.scrollHeight) + $$_px;
//   });
//
// });

// liste des propriétés css :
// https://www.quackit.com/css/properties/
// https://www.tutorialrepublic.com/css-reference/css3-properties.php
// incomplete : https://developer.mozilla.org/fr/docs/Web/CSS/CSS_Properties_Reference
// https://css-tricks.com/almanac/properties/

// https://stackoverflow.com/questions/4255472/javascript-object-access-variable-property-by-name-as-string
